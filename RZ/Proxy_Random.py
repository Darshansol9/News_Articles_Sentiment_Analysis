import requests
import random

ip_address = ['106.104.151.142:58198','93.88.216.51:59027','138.186.21.86:53281','103.106.193.236:45768','140.227.31.224:6000','176.196.225.22:46988','36.37.132.225:40454','119.82.253.210:53119','203.202.254.206:61456','109.75.140.158:59916','222.165.214.98:58408','109.248.62.207:43558','36.89.165.89:43139','200.170.250.114:9090','87.247.3.234:52098','185.73.206.205:39009','182.74.243.39:3128','105.29.85.19:47915','89.207.92.146:37766','180.183.136.59:8080','194.183.168.129:31385','81.163.52.108:41258','118.174.232.237:48665','217.195.59.22:41447','140.227.65.86:6000','192.99.167.78:3128','188.6.197.119:32116','207.148.68.190:80','103.108.144.142:8080','194.114.128.149:61213','183.89.169.247:8080','195.112.252.180:49044','31.129.175.214:49947','195.69.218.198:33503','203.142.69.242:31282','124.122.8.117:8080','58.8.193.5:8080','200.110.174.130:8080','223.206.144.89:8080','109.70.189.56:48774','177.128.42.25:33646','1.32.59.217:45933','110.39.52.10:36868','190.145.148.34:56368','124.122.188.68:8213','103.111.54.26:49781','187.73.68.14:53281','46.19.100.28:47244','103.221.254.125:51630','110.169.156.241:8080','37.139.85.66:35924','94.244.44.67:46386','192.99.167.180:3128','103.87.236.46:41183','1.20.100.133:46755','23.244.28.27:3128','181.10.210.99:44252','31.28.99.25:43760','91.191.250.142:31059','196.37.158.201:8080','210.212.68.213:35381','85.117.61.186:49929','138.122.14.158:51692','95.84.128.25:33765','36.92.108.150:3128','158.69.212.89:3128','101.109.255.243:54819','156.0.249.9:39886','158.69.212.85:3128','103.241.204.225:8080','124.41.211.196:36084','103.241.227.116:37774','14.207.171.249:8080','192.99.167.110:3128','103.21.93.1:61317','119.15.91.137:50712','198.98.59.239:8080','125.213.155.98:8080','78.41.53.39:8080','192.99.167.185:3128','103.239.254.114:39704','46.33.253.29:47713','180.183.197.205:8080','192.99.167.99:3128','176.9.195.49:8081','114.134.186.25:42556','158.69.62.126:3128','41.211.126.224:61255','202.57.52.18:57126','42.115.88.12:32728','119.82.249.4:58774','140.227.72.204:6000','115.74.201.137:42108','192.99.167.141:3128','117.102.119.150:47704','35.188.19.214:3128','192.99.167.154:3128','198.50.152.64:23500','200.41.174.2:8080','114.57.49.242:5328']


def get_proxy():
    this_ip = random.choice(ip_address)

    return this_ip

url = 'https://httpbin.org/ip'

def getHtml():
    # ....
    while True:
        try:
            proxy = get_proxy()
            print(proxy)
            html = requests.get(url, proxies={"https": "https://{}".format(proxy)})
            # 使用代理访问
            print(html.content)
        except Exception:
            print("Error")
    # 出错5次, 删除代理池中代理

print(getHtml())